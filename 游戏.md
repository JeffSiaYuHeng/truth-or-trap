# 🎮 游戏机制与功能详解：Truth or Trap

《Truth or Trap》是一款专为移动设备设计的、具有高触感和"活力（Vibrant）"简约风格的派对游戏。它将经典的真心话大冒险（Truth or Dare）与策略卡牌玩法以及随机运气事件完美结合。

---

## 🚀 1. 设置阶段
在派对开始前，主持人可以配置游戏环境：
*   **玩家入场**：在游乐厅添加至少 2 名玩家。界面顶端会显示最新加入的玩家，以便快速核对。
*   **难度选择**：垂直列表式选择，让玩家决定挑战的强度：
    *   **简单 (Simple)**：轻松有趣，完美的破冰选择。
    *   **普通 (Normal)**：经典的平衡体验，包含秘密与搞怪任务。
    *   **极限 (Extreme)**：挑战极限，勇者的游戏。
*   **多语言入口**：通过顶部的导航栏，在 **英语 (🇺🇸)**、**中文 (🇨🇳)** 和 **马来语 (🇲🇾)** 之间快速切换。
*   **教程入口**：点击左上角的交互式向导，了解规则和卡牌设计细节。

---

## 🌀 2. 核心游戏流程

### 轮盘抽选
每一轮都从轮盘开始。系统随机选择一名玩家作为"当前活动玩家"。

### 2连击惩罚 (强制大冒险)
如果轮盘**连续两次选中同一名玩家**，该玩家将被锁定在**强制大冒险**状态。他们将失去选择"真心话"的权利，必须完成一项大冒险挑战才能继续。

### 决策阶段
活动玩家成为全场焦点，必须在以下选项中做出选择：
*   **真心话 (Truth)**：诚实地回答一个私人问题。
*   **大冒险 (Dare)**：进行一项身体或社交上的挑战。
*   *注意：为了视觉辅助，真心话使用点状图案，大冒险使用条纹图案。*

### 挑战阶段 (中段)
选定的挑战会从屏幕外"飞"入中心。
*   **无法回头**："跳过挑战"按钮已被移除，以增加博弈感。所有选中的挑战都是必须执行的。
*   **完成任务**：完成后，玩家点击显眼的 **DONE** 按钮以结束本轮。

---

## 🃏 3. 陷阱卡系统 (Trap Card System)
卡牌是用于操控游戏或针对其他玩家的特殊工具。卡牌可以通过"随机事件"获得，或通过连击奖励赢得。

### 🎒 道具背包 (Inventory)
玩家可以在"决策阶段"点击底部的 **ITEMS (X)** 标签来查看自己的卡牌。

### 卡牌功能详情：
| 卡牌类型 | 图标 | 后台机制 |
| :--- | :--- | :--- |
| **免除卡 (Immunity)** | 🛡️ | **跳过回合**：允许玩家完全跳过一个令其恐惧的真心话或大冒险，且无任何惩罚。 |
| **对战卡 (Battle)** | ⚔️ | **猜拳决斗**：向任意一名玩家发起"剪刀石头布"挑战。输家将被立即强制进行一项高难度大冒险。 |
| **偷取卡 (Steal)** | 🕵️ | **窃取 (75%成功率)**：尝试从其他玩家手中偷取一张免除卡。如果失败，**你自己**将必须接受一项极其困难的挑战作为惩罚。 |
| **国王卡 (King)** | 👑 | **颁布圣旨**：持有者可以自定义一项真心话或大冒险的内容，并将其强制施加给任何一名选定的目标玩家。 |

---

## 🎁 4. 奖励与随机事件

### 大冒险连击奖励
勇敢地连续完成 **3 次大冒险** 的玩家将自动获得一张 **"免除卡"** 作为"勇者奖金"。

### 幸运随机事件
每轮结束后，都有一定概率触发**随机事件**。系统会介入流程，随机奖励一张陷阱卡给任意一名玩家，使场上的局势发生不断的变化。

---

## 🎨 5. 设计理念：活力 (VIBRANT)
游戏遵循 **VIBRANT 设计系统**：
*   **简约表情符号**：从交互关键点（难度、选择、导航栏）中精简了 Emoji，以保持一种高端、稳重的美感。
*   **真实触感反馈**：按钮设计有物理"凹槽"和 3D 阴影，模拟真实世界的按压反馈。
*   **中心垂直布局**：所有核心游戏元素均为垂直居中排列，更符合移动设备的人体工程学。
*   **上下文感知的 UI**：屏幕过渡平滑，在需要专注挑战时自动隐藏不必要的元素（如卡牌背包）。

---

## 📁 6. 项目结构

```text
truth-or-trap/
├── components/        # UI 组件（界面、弹窗、提示框）
├── context/           # React 上下文（多语言支持：EN/CN/MY）
├── hooks/             # 自定义 Hooks（gameReducer.ts 核心游戏逻辑）
├── services/          # 数据服务与挑战数据库（JSON）
├── QuestionFile/      # Python 内容管理脚本
├── public/            # 静态资源与游戏插图
├── App.tsx            # 主应用逻辑与导航
├── constants.ts       # 共享常量与游戏配置
├── types.ts           # TypeScript 游戏状态类型定义
├── index.css          # VIBRANT 设计系统与全局样式
├── GAME_MECHANICS.md  # 详细规则与机制文档（英文）
└── 游戏.md             # 详细规则与机制文档（中文）
```

---

## 🤝 贡献指南

`QuestionFile` 目录包含用于扩展 `challenges.json` 数据库的 Python 脚本：
- `new.py`：新问题模板生成器。
- `run.py`：批量格式化与处理脚本。